{% extends 'company/company_base.html' %}
{% load static %}

{% block title_block %}
    Products
{% endblock %}

{% block body_block %}

    <div class="container m-5">
        

            <div id="product_table">
                {% if company_products %}

                    <table class="table">
                        <thead>
                            <tr>
                                <th>Sl No.</th>
                                <th>Product name</th>
                                <th>Product distributor price</th>
                                <th>Product MRP</th>
                                <th>Product tax</th>
                                <th>Product discount</th>                
                            </tr>
                        </thead>
                        <tbody>

                            {% for product in company_products %}
                                <tr>
                                    <td scope="row">{{forloop.counter}}</td>
                                    <td>
                                        <a href="{% url 'company:company_product_detail' company_name=company_name product_id=product.id %}">
                                            {{product.product_name}}
                                        </a>
                                    </td>
                                    <td>{{product.product_distributor_price}}</td>
                                    <td>{{product.product_mrp}}</td>
                                    <td>{{product.product_tax}}</td>
                                    <td>{{product.product_discount}}</td>
                                    <td>
                                        <a href="{% url 'company:company_product_remove' company_name=company_name product_id=product.id %}">
                                            REMOVE
                                        </a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>        
            `   {% endif %}

                <button class="btn btn-primary btn-lg" id="btn_add_product" onclick="add_product();">Add product</button>

            </div>
        

        <form style="display: none;" id="form-add-product" method="POST" action="{% url 'company:company_product_list' company_name=company_name %}">

            {% csrf_token %}
            <p class="lead">Enter the product details</p>

            <div class="form-group">
              <label for="product name">Product name</label>
              <input type="text" name="product name" id="product name" class="form-control" placeholder="Product name">              
            </div>

            <div class="form-group">
                <label for="product price">Product distributor price</label>
                <input type="text" name="product distributor price" id="product distributor price" class="form-control" placeholder="Product distributor price">              
            </div>

            <div class="form-group">
                <label for="product price">Product MRP</label>
                <input type="text" name="product MRP" id="product MRP" class="form-control" placeholder="Product MRP">              
            </div>

            <div class="form-group">
                <label for="product tax">Product tax</label>
                <input type="text" name="product tax" id="product tax" class="form-control" placeholder="Product tax">              
            </div>

            <div class="form-group">
                <label for="product discount">Product discount</label>
                <input type="text" name="product discount" id="product discount" class="form-control" placeholder="Product discount">              
            </div>

            <button type="submit" class="btn btn-lg btn-success">ADD PRODUCT</button>
            <button onclick="close_add_product_form();" class="btn btn-lg btn-danger">CANCEL</button>
        </form>

    </div>

    <script>
        function add_product()
        {
            var add_product_form = document.getElementById("form-add-product");
            add_product_form.style.display="block";
            $("#product_table").fadeOut(100);
        }

        function close_add_product_form()
        {
            var add_product_form = document.getElementById("form-add-product");
            add_product_form.style.display="none";

        }
    </script>

{% endblock %}